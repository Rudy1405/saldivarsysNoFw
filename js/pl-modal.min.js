var pl;!function(t){var e=function(){function t(){this._handlers=[],this._scope=this||window}return t.prototype.add=function(t){t&&this._handlers.push(t)},t.prototype.fire=function(){var t=this,e=arguments;this._handlers.forEach(function(n){n.apply(t._scope,e)})},t.prototype.remove=function(t){this._handlers=this._handlers.filter(function(e){if(e!=t)return e})},t}();t.Event=e}(pl||(pl={})),function(t){var e=function(){function e(t){this._isOpen=!1;var n={avoidClose:!1,closeWithOverlay:!1,effectName:""};this._settings=e.extendsDefaults(n,t||{}),this._transitionend=e.transitionSelect(),this.buildOut(),this.initializeEvents()}return e.transitionSelect=function(){var t=document.createElement("div"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n]},e.extendsDefaults=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.prototype.buildOut=function(){this.modal.appendChild(this.content),this._settings.avoidClose||this.content.appendChild(this.closeButton)},e.prototype.initializeEvents=function(){var t=this;if(!this._settings.avoidClose){document.addEventListener("keydown",function(e){27==e.keyCode&&t.close()},!1),this.closeButton.addEventListener("click",function(e){t.close()},!1),this._settings.closeWithOverlay&&this.overlay.addEventListener("click",function(e){t.close()},!1)}this.toggleTransitionend=this.toggleTransitionend.bind(this),this.content.addEventListener(this._transitionend,this.toggleTransitionend,!1)},e.prototype.removeFromDom=function(){this.overlay.parentNode.removeChild(this.overlay),this.modal.parentNode.removeChild(this.modal)},e.prototype.toggleTransitionend=function(t){var e=this,n=this._isOpen?this.onClosed:this.onOpened;this.content.removeEventListener(this._transitionend,this.toggleTransitionend),this._isOpen=!this._isOpen,n.call(this),setTimeout(function(){e.content.addEventListener(e._transitionend,e.toggleTransitionend,!1)},50)},e.prototype.close=function(){if(this._isOpen){var t=document.body;t.className=t.className.replace(/\s?\bno-scroll\b/g,""),this.overlay.className=this.overlay.className.replace(/\s?\bpl-modal-open\b/g,""),this.modal.className=this.modal.className.replace(/\s?\bpl-modal-open\b/g,"")}},e.prototype.changeEffect=function(t){this._settings.effectName=t,this.modal.className="pl-modal "+this._settings.effectName},e.prototype.open=function(t){if(!this._isOpen){var e=document.body;this.setContent(t),e.appendChild(this.overlay),e.appendChild(this.modal),e.className+="no-scroll",window.getComputedStyle(this.overlay).backgroundColor,window.getComputedStyle(this.modal).opacity,window.getComputedStyle(this.content).opacity,this.overlay.className+=" pl-modal-open",this.modal.className+=" pl-modal-open"}},e.prototype.setContent=function(t){void 0===t&&(t=""),this.content.innerHTML="",this._settings.avoidClose||this.content.appendChild(this.closeButton),"string"==typeof t?this.content.appendChild(document.createTextNode(t)):this.content.appendChild(t)},e.prototype.onClosed=function(){this._closed&&this._closed.fire(),this.removeFromDom()},e.prototype.onOpened=function(){this._opened&&this._opened.fire()},Object.defineProperty(e.prototype,"closed",{get:function(){return this._closed||(this._closed=new t.Event),this._closed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened||(this._opened=new t.Event),this._opened},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlay",{get:function(){return this._overlay||(this._overlay=document.createElement("div"),this._overlay.className="pl-modal-overlay"),this._overlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal||(this._modal=document.createElement("div"),this._modal.className="pl-modal "+this._settings.effectName),this._modal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content||(this._content=document.createElement("div"),this._content.className="pl-modal-content"),this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeButton",{get:function(){return this._closeButton||(this._closeButton=document.createElement("div"),this._closeButton.className="pl-modal-close-button"),this._closeButton},enumerable:!0,configurable:!0}),e}();t.Modal=e}(pl||(pl={}));